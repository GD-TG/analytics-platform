# üîë –ü–æ–ª—É—á–µ–Ω–∏–µ OAuth —Ç–æ–∫–µ–Ω–∞ –¥–ª—è Yandex API

## –í–∞—à–∏ credentials:

- **Client ID**: `081345a9f48742d18f6cbacf890cfb1b`
- **Client Secret**: `bd90a984306e4d3bb8cdea8fb492610e`

## –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
   ```
   https://oauth.yandex.ru/authorize?response_type=token&client_id=081345a9f48742d18f6cbacf890cfb1b
   ```

2. **–ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å** –≤ —Å–≤–æ–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ –Ø–Ω–¥–µ–∫—Å

3. **–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é

4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω** –∏–∑ URL –±—Ä–∞—É–∑–µ—Ä–∞ (–ø–∞—Ä–∞–º–µ—Ç—Ä `access_token=...`)

5. **–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:**
   ```env
   YANDEX_CLIENT_ID=081345a9f48742d18f6cbacf890cfb1b
   YANDEX_CLIENT_SECRET=bd90a984306e4d3bb8cdea8fb492610e
   YANDEX_OAUTH_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å
   ```

## –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ API (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

1. **–ü–æ–ª—É—á–∏—Ç–µ URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**
   ```bash
   curl http://localhost:8000/api/yandex/auth-url
   ```

2. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ** –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å

3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥** –∏–∑ URL (–ø–∞—Ä–∞–º–µ—Ç—Ä `code=...`)

4. **–û–±–º–µ–Ω—è–π—Ç–µ –∫–æ–¥ –Ω–∞ —Ç–æ–∫–µ–Ω:**
   ```bash
   curl -X POST http://localhost:8000/api/yandex/exchange-code \
     -H "Content-Type: application/json" \
     -d '{"code":"–≤–∞—à_–∫–æ–¥_–∑–¥–µ—Å—å"}'
   ```

5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω** –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`

## –°–ø–æ—Å–æ–± 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–∫–µ–Ω–∞

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–∂–µ –µ—Å—Ç—å –≤ `.env`, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –µ–≥–æ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å:

```bash
curl http://localhost:8000/api/yandex/validate-token
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# Yandex OAuth credentials
YANDEX_CLIENT_ID=081345a9f48742d18f6cbacf890cfb1b
YANDEX_CLIENT_SECRET=bd90a984306e4d3bb8cdea8fb492610e
YANDEX_OAUTH_TOKEN=–≤–∞—à_oauth_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å

# Direct API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
DIRECT_CLIENT_LOGIN=–ª–æ–≥–∏–Ω_–∫–ª–∏–µ–Ω—Ç–∞_–≤_–¥–∏—Ä–µ–∫—Ç–µ

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
YANDEX_DEFAULT_CURRENCY=RUB
DEFAULT_TIMEZONE=Europe/Moscow
```

## ‚úÖ –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à: `php artisan config:clear`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω: `curl http://localhost:8000/api/yandex/validate-token`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é: `php artisan analytics:sync-daily`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API:

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ API –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è:
- –ü–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
- –ü–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑—É

